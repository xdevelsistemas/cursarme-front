<div class="row">
    <div class="col-md-12">
        <div class="col-md-12">
            <div class="col-md-12">
                <h2>Enviar Circular</h2>
            </div>
        </div>
    </div>
</div>
<br/><br/>
<div class="col-md-12">
    <div class="row">
        <div class="col-md-12">
            <xd-select data-params="ec._model.curso" data-change="ec.changeCurso"></xd-select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <xd-select data-params="ec._model.turma" data-disable="ec.disableTurma" data-change="ec.changeTurma"></xd-select>
        </div>
        <div class="col-md-8">
            <xd-select data-params="ec._model.disciplina" data-disable="ec.disableDisciplina"></xd-select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <hr/>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <xd-input data-params="ec._model.titulo"></xd-input>
        </div>
    </div>
    <div class="row">
        <div class="col-md-7">
            <xd-input data-params="ec._model.numero"></xd-input>
        </div>
        <div class="col-md-5">
            <xd-input-date data-params="ec._model.data"></xd-input-date>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <xd-input-textarea data-params="ec._model.texto"></xd-input-textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="col-md-12">
                <div class="col-md-9" style="margin-bottom: 40px">
                    <h3>{{ec.STR.UPLOAD}} {{ec.STR.FILE}}s</h3>

                    <table class="table">
                        <thead>
                        <tr>
                            <th width="50%">{{ec.STR.NAME}}</th>
                            <th ng-show="ec.uploader.isHTML5">{{ec.STR.SIZE}}</th>
                            <th ng-show="ec.uploader.isHTML5">{{ec.STR.PROGRESS}}</th>
                            <th>{{ec.STR.STATUS}}</th>
                            <th>{{ec.STR.ACTION}}</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in ec.uploader.queue">
                            <td><strong>{{ item.file.name }}</strong></td>
                            <td ng-show="ec.uploader.isHTML5" nowrap>{{ item.file.size/1024|number:2 }} KB</td>
                            <td ng-show="ec.uploader.isHTML5">
                                <div class="progress" style="margin-bottom: 0;">
                                    <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                </div>
                            </td>
                            <td class="text-center">
                                <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                            </td>
                            <td nowrap>
                                <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                    <span class="glyphicon glyphicon-upload"></span> {{ec.STR.UPLOAD}}
                                </button>
                                <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                    <span class="glyphicon glyphicon-ban-circle"></span> {{ec.STR.CANCEL}}
                                </button>
                                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                    <span class="glyphicon glyphicon-trash"></span> {{ec.STR.REMOVE}}
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>{{ec.STR.TOTALFILES}}: {{ ec.uploader.queue.length }}</p>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <div>
                        <div>
                            {{ec.STR.PROGRESSTOTAL}}
                            <div class="progress" style="">
                                <div class="progress-bar" role="progressbar" ng-style="{ 'width': ec.uploader.progress + '%' }"></div>
                            </div>
                        </div>

                        <span class="btn btn-info btn-file">
                            <span class="fileinput-new"><i class="glyphicon glyphicon-paperclip"></i>Anexar</span>
                            <input type="file" name="fileNew" nv-file-select="" uploader="ec.uploader" multiple="">
                        </span>
                        <button type="button" class="btn btn-success btn-s" ng-click="ec.uploader.uploadAll()" ng-disabled="!ec.uploader.getNotUploadedItems().length">
                            <span class="glyphicon glyphicon-upload"></span> {{ec.STR.UPLOADALL}}
                        </button>
                        <button type="button" class="btn btn-warning btn-s" ng-click="ec.uploader.cancelAll()" ng-disabled="!ec.uploader.isUploading">
                            <span class="glyphicon glyphicon-ban-circle"></span> {{ec.STR.CANCELALL}}
                        </button>
                        <button type="button" class="btn btn-danger btn-s" ng-click="ec.uploader.clearQueue()" ng-disabled="!ec.uploader.queue.length">
                            <span class="glyphicon glyphicon-trash"></span> {{ec.STR.REMOVEALL}}
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="col-md-12">
                <div class="col-md-12">
                    <div class="form-group">
                        <div class="fileinput fileinput-new" data-provides="fileinput">
                            <span class="fileinput-filename"></span>
                            <a class="close fileinput-exists linkCursor" data-dismiss="fileinput" style="float: none">&times;</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6 pull-right">
        <div class="col-md-5 pull-right">
            <button class="btn btn-warning btn-icon icon-left btn-lg btn-block" ng-click="ec.limpar()"
                    data-ng-disabled="ec._model.curso.model.val == '' &&
                                      ec._model.turma.model.val == '' &&
                                      ec._model.disciplina.model.val == '' &&
                                      ec._model.titulo.model.val == '' &&
                                      ec._model.numero.model.val == '' &&
                                      ec._model.data.model.val == '' &&
                                      ec._model.anexo.model.val == '' &&
                                      ec._model.texto.model.val == ''">
                Limpar
                <i class="icon entypo-cup icon-right"></i></button>
        </div>
        <div class="col-md-5 pull-right">
            <button class="btn btn-green btn-lg btn-icon icon-left btn-block" ng-click="ec.salvar()">
                Salvar
                <i class="entypo-check"></i>
            </button>
        </div>
    </div>
</div>
<script>
    $('#anexo').fileinput();
</script>